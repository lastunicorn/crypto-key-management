<Window
    x:Class="DustInTheWind.CryptoKeyManagement.Wpf.Main.MainWindow"
  
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:sidebar="clr-namespace:DustInTheWind.CryptoKeyManagement.Wpf.Presentation.Sidebar"
    xmlns:signingPage="clr-namespace:DustInTheWind.CryptoKeyManagement.Wpf.Presentation.SigningPage"
    xmlns:pluginsPage="clr-namespace:DustInTheWind.CryptoKeyManagement.Wpf.Presentation.PluginsPage"
    xmlns:controls="clr-namespace:DustInTheWind.CryptoKeyManagement.Wpf.Presentation.Controls"
  
    mc:Ignorable="d"
    Title="{Binding WindowTitle, Mode=OneWay}"
    Height="600"
    Width="1000"
    ResizeMode="CanResizeWithGrip">

    <Window.Style>
        <DynamicResource ResourceKey="{x:Type Window}" />
    </Window.Style>

    <DockPanel>

        <sidebar:SideNavigator>

            <TabItem>
                <TabItem.Header>
                    <Image
                        Source="{DynamicResource SigningIcon}"
                        Width="24"
                        Height="24"
                        Margin="0"
                        HorizontalAlignment="Center"/>
                </TabItem.Header>

                <signingPage:SigningPage
                    DataContext="{Binding SigningPageViewModel}" />
            </TabItem>

            <TabItem>
                <TabItem.Header>
                    <Image
                        Source="{DynamicResource PluginIcon}"
                        Width="24"
                        Height="24"
                        Margin="0"
                        HorizontalAlignment="Center"/>
                </TabItem.Header>

                <pluginsPage:PluginsPage
                    DataContext="{Binding PluginsPageViewModel}" />
            </TabItem>

            <sidebar:SideNavigator.Buttons>
                <controls:SidebarButton
                    DockPanel.Dock="Bottom"
                    Command="{Binding ToggleThemeCommand}"
                    ToolTip="Toggle between light and dark theme">

                    <controls:SidebarButton.Content>
                        <Image Width="24" Height="24">
                            <Image.Style>
                                <Style TargetType="Image">
                                    <Setter Property="Source" Value="{DynamicResource SunIcon}" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding ThemeType}" Value="Dark">
                                            <Setter Property="Source" Value="{DynamicResource MoonIcon}" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Image.Style>
                        </Image>
                    </controls:SidebarButton.Content>
                </controls:SidebarButton>
            </sidebar:SideNavigator.Buttons>

        </sidebar:SideNavigator>

    </DockPanel>

</Window>