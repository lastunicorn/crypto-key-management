<Window
    x:Class="DustInTheWind.SignatureManagement.Wpf.Presentation.KeysSelector.ConfirmationWindow"
    
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    
    Title="Confirm Delete Key"
    Width="500"
    Height="240"
    ResizeMode="NoResize"
    ShowInTaskbar="False"
    WindowStyle="SingleBorderWindow"
    SizeToContent="Height">

    <Window.Style>
        <DynamicResource ResourceKey="{x:Type Window}" />
    </Window.Style>

    <Grid Margin="20">
        
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Warning Icon and Title -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0 0 0 15">
            
            <Viewbox Width="32" Height="32" Margin="0 0 15 0">
                <Canvas Width="24" Height="24">
                    <Path Fill="#FFFF6B00"
                    Data="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
                </Canvas>
            </Viewbox>
            
            <TextBlock
                Text="Delete Signature Key"
                FontSize="18"
                FontWeight="Bold"
                VerticalAlignment="Center"/>
            
        </StackPanel>

        <!-- Message Content -->
        <StackPanel Grid.Row="1" Margin="0,0,0,20">
            <TextBlock
                Text="{Binding Message, RelativeSource={RelativeSource AncestorType=Window}}"
                FontSize="14"
                TextWrapping="Wrap"
                Margin="0 0 0 15"/>

            <Border
                BorderThickness="1"
                Padding="12"
                CornerRadius="4"
                Margin="0 0 0 15">
                
                <Border.Style>
                    <Style TargetType="Border">
                        <Setter Property="Background" Value="#FFF5F5F5"/>
                        <Setter Property="BorderBrush" Value="#FFCCCCCC"/>
                        <Style.Triggers>
                            <!-- Check for dark theme by looking at window background -->
                            <DataTrigger Binding="{Binding Background.Color, RelativeSource={RelativeSource AncestorType=Window}}" Value="#FF1E1E1E">
                                <Setter Property="Background" Value="#FF2D2D30"/>
                                <Setter Property="BorderBrush" Value="#FF3F3F46"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Border.Style>
                
                <TextBlock
                    Text="{Binding KeyInfo, RelativeSource={RelativeSource AncestorType=Window}}"
                    FontFamily="Consolas"
                    FontSize="12"
                    TextWrapping="Wrap"/>
                
            </Border>

            <TextBlock
                Text="⚠️ This action cannot be undone."
                FontSize="13"
                FontWeight="SemiBold"
                Foreground="#FFDC3545"
                TextWrapping="Wrap"/>
        </StackPanel>

        <!-- Buttons -->
        <StackPanel
            Grid.Row="2"
            Orientation="Horizontal"
            HorizontalAlignment="Right"
            Margin="0 10 0 0">

            <Button
                Name="YesButton"
                Content="Yes, Delete"
                Width="100"
                Height="32"
                Margin="0 0 10 0"
                Background="#FFDC3545"
                Foreground="White"
                FontWeight="SemiBold"
                Click="YesButton_Click">
                
                <Button.Style>
                    <Style
                        TargetType="Button">
                        <Setter Property="Cursor" Value="Hand"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    
                                    <Border
                                        Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="1"
                                        CornerRadius="4"
                                        Padding="8 6">
                                        
                                        <ContentPresenter
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                                    </Border>
                                    
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#FFC82333"/>
                                        </Trigger>
                                        <Trigger Property="IsPressed" Value="True">
                                            <Setter Property="Background" Value="#FFB21E2C"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                    
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Button.Style>
            </Button>

            <Button
                Name="NoButton"
                Content="Cancel"
                Width="80"
                Height="32"
                Click="NoButton_Click">
                
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Cursor" Value="Hand"/>
                        
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    
                                    <Border
                                        Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="1"
                                        CornerRadius="4"
                                        Padding="8 6">
                                        
                                        <ContentPresenter
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                                    </Border>
                                    
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </Button.Style>
            </Button>

        </StackPanel>
    </Grid>

</Window>